{% import 'OroWorkflowBundle::macros.html.twig' as workflowMacros %}

<div class="widget-content">
    <div class="workflow-collapse" {% if workflows|length > 1 %}
        data-page-component-module="oroui/js/app/components/jquery-widget-component"
        data-page-component-options="{{ {
            widgetModule: 'oroui/js/widget/collapse-widget',
            storageKey: entityId
        }|json_encode() }}"
    {% endif %}>
        <span class="workflow-collapse-button" data-collapse-trigger></span>
        {% for workflow in workflows %}
            {% if loop.index == 2 %}
            <div class="workflow-collapse-container" data-collapse-container>
            {% endif %}
                <table class="workflow-entity">
                    <tr>
                        <td class="workflow-label"><div class="workflow-label-text">{{ workflow.label|trans }}</div></td>
                        <td class="workflow-content-container">
                            <table class="workflow-content">
                                <tr>
                                    <td class="workflow-steps">
                                        {% set isOrdered = workflow.stepsData.is_ordered %}
                                        {% set steps = workflow.stepsData.steps %}
                                        {% for step in steps %}
                                            {% set active = step.active %}
                                            {% set possibleStepsCount = step.possibleStepsCount %}
                                            {{ step.label|trans }}
                                        {% endfor %}
                                    </td>
                                    <td class="workflow-controls">
                                        {% include 'OroWorkflowBundle::Widget/widget/button.html.twig' with {'workflow': workflow, 'entity_id': entityId} %}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            {% if loop.last %}
            </div>
            {% endif %}
        {% endfor %}
    </div>
</div>
